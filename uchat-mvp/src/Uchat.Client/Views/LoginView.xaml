<UserControl x:Class="Uchat.Client.Views.LoginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:converters="clr-namespace:Uchat.Client.Converters"
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="800">

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>

        <Geometry x:Key="Icon_Google">M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .533 5.333.533 12S5.867 24 12.48 24c3.44 0 6.053-1.147 7.973-3.067 1.947-1.947 2.533-4.72 2.533-6.96 0-.667-.053-1.253-.147-1.787H12.48z</Geometry>
        
        <Geometry x:Key="Icon_Github">M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12</Geometry>

        <Geometry x:Key="Icon_Facebook">M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z</Geometry>
        
        <Geometry x:Key="Icon_Microsoft">M0 0h11.377v11.372H0zM12.623 0H24v11.372H12.623zM0 12.623h11.377V24H0zM12.623 12.623H24V24H12.623z</Geometry>

        
        <Style x:Key="FormLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#AAAAAA"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,15,0,5"/>
        </Style>

        <Style x:Key="GlassTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="#25FFFFFF"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="CaretBrush" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border" Height="40" Background="{TemplateBinding Background}" CornerRadius="6"
                                BorderBrush="#30FFFFFF" BorderThickness="1">
                            <ScrollViewer x:Name="PART_ContentHost" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#35FFFFFF"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#50FFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#40FFFFFF"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#80FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="GlassPasswordBox" TargetType="PasswordBox">
            <Setter Property="Background" Value="#25FFFFFF"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="CaretBrush" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="PasswordBox">
                        <Border x:Name="border" Height="40" Background="{TemplateBinding Background}" CornerRadius="6"
                                BorderBrush="#30FFFFFF" BorderThickness="1">
                            <ScrollViewer x:Name="PART_ContentHost" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#35FFFFFF"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#50FFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#40FFFFFF"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#80FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="#35FFFFFF"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Height="45" Background="{TemplateBinding Background}" CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Opacity" Value="0.5"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#45FFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#60FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SocialButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="50"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="Margin" Value="8,0"/>
            <Setter Property="Background" Value="#15FFFFFF"/>
            <Setter Property="BorderBrush" Value="#30FFFFFF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="brd" 
                                CornerRadius="12" 
                                Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="brd" Property="Background" Value="#25FFFFFF"/>
                                <Setter TargetName="brd" Property="BorderBrush" Value="#50FFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="brd" Property="Background" Value="#30FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </UserControl.Resources>

    <Grid>
<Grid.Background>
            <ImageBrush ImageSource="bg_uchat.png" Stretch="UniformToFill"/>
        </Grid.Background>

        <Border Width="420" VerticalAlignment="Center" HorizontalAlignment="Center"
                CornerRadius="20" Background="#15FFFFFF" Padding="40">
            <Border.BorderBrush>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#40FFFFFF" Offset="0.0"/>
                    <GradientStop Color="#05FFFFFF" Offset="0.5"/>
                    <GradientStop Color="#20FFFFFF" Offset="1.0"/>
                </LinearGradientBrush>
            </Border.BorderBrush>
            <Border.Effect>
                <DropShadowEffect Color="#000000" Direction="315" ShadowDepth="5" BlurRadius="20" Opacity="0.5"/>
            </Border.Effect>

            <StackPanel>
                <TextBlock Text="Welcome Back" Foreground="White" FontSize="26" FontWeight="Bold"
                           HorizontalAlignment="Center" TextAlignment="Center" Margin="0,0,0,5"/>
                
                <TextBlock Text="Sign in to continue to Uchat" Foreground="#AAAAAA" FontSize="14"
                           HorizontalAlignment="Center" Margin="0,0,0,25"/>

                <TextBlock Text="{Binding ErrorMessage}"
                           Foreground="#FF6B6B"
                           TextWrapping="Wrap"
                           TextAlignment="Center"
                           Visibility="{Binding ErrorMessage, Converter={StaticResource NullToVisibilityConverter}}" 
                           Margin="0,0,0,15"/>

                <TextBlock Text="Username or Email" Style="{StaticResource FormLabel}"/>
                <TextBox Style="{StaticResource GlassTextBox}" 
                         Text="{Binding UsernameOrEmail, UpdateSourceTrigger=PropertyChanged}"/>

                <TextBlock Text="Password" Style="{StaticResource FormLabel}"/>
                <PasswordBox x:Name="PasswordBox" 
                             Style="{StaticResource GlassPasswordBox}"
                             PasswordChanged="PasswordBox_PasswordChanged"/>

                <CheckBox Content="Remember me"
                          IsChecked="{Binding RememberMe}"
                          Foreground="#DDDDDD" FontSize="14"
                          Margin="0,20,0,20" VerticalContentAlignment="Center"/>

                <TextBlock Text="Signing in..." Foreground="#DDDDDD" HorizontalAlignment="Center" Margin="0,0,0,10"
                           Visibility="{Binding IsLoggingIn, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                <Button Content="Sign In" 
                        Command="{Binding LoginCommand}"
                        Style="{StaticResource PrimaryButton}"
                        Margin="0,5,0,25" 
                        IsDefault="True"/>

                <Grid Margin="0,0,0,20">
                    <Grid.ColumnDefinitions><ColumnDefinition/><ColumnDefinition Width="Auto"/><ColumnDefinition/></Grid.ColumnDefinitions>
                    <Border Height="1" Background="#20FFFFFF" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="1" Text="Or log in using:" Foreground="#AAAAAA" Margin="10,0"/>
                    <Border Grid.Column="2" Height="1" Background="#20FFFFFF" VerticalAlignment="Center"/>
                </Grid>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,30">
                    
                    <Button Style="{StaticResource SocialButtonStyle}" 
                            Command="{Binding LoginWithGoogleCommand}" ToolTip="Log in with Google">
                        <Path Data="{StaticResource Icon_Google}" Fill="White" Stretch="Uniform" Height="20" Width="20"/>
                    </Button>
                    
                    <Button Style="{StaticResource SocialButtonStyle}"
                            Command="{Binding LoginWithGithubCommand}" ToolTip="Log in with GitHub">
                        <Path Data="{StaticResource Icon_Github}" Fill="White" Stretch="Uniform" Height="22" Width="22"/>
                    </Button>

                    <Button Style="{StaticResource SocialButtonStyle}"
                            Command="{Binding LoginWithFacebookCommand}" ToolTip="Log in with Facebook">
                        <Path Data="{StaticResource Icon_Facebook}" Fill="White" Stretch="Uniform" Height="22" Width="22"/>
                    </Button>

                    <Button Style="{StaticResource SocialButtonStyle}"
                            Command="{Binding LoginWithMicrosoftCommand}" ToolTip="Log in with Microsoft">
                        <Path Data="{StaticResource Icon_Microsoft}" Fill="White" Stretch="Uniform" Height="20" Width="20"/>
                    </Button>

                </StackPanel>

                <Border Background="#20000000" CornerRadius="10" Padding="5">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Border Grid.Column="0" Background="#5B31E79B" CornerRadius="8" Padding="0,8">
                            <TextBlock Text="Sign in" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                        </Border>

                        <Button Grid.Column="1" Content="Sign up" Background="Transparent" BorderThickness="0"
                                Foreground="#AAAAAA" FontWeight="SemiBold" Cursor="Hand"
                                Command="{Binding NavigateToRegisterCommand}">
                             <Button.Template>
                                 <ControlTemplate TargetType="Button">
                                     <Border Background="Transparent" Padding="0,8">
                                         <ContentPresenter HorizontalAlignment="Center"/>
                                     </Border>
                                     <ControlTemplate.Triggers>
                                         <Trigger Property="IsMouseOver" Value="True">
                                             <Setter Property="Foreground" Value="White"/>
                                         </Trigger>
                                     </ControlTemplate.Triggers>
                                 </ControlTemplate>
                             </Button.Template>
                        </Button>
                    </Grid>
                </Border>

            </StackPanel>
        </Border>
    </Grid>
</UserControl>