<UserControl x:Class="Uchat.Client.Views.RegisterView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:converters="clr-namespace:Uchat.Client.Converters"
             mc:Ignorable="d"
             d:DesignHeight="700" d:DesignWidth="500">

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <converters:InverseBooleanToVisibilityConverter x:Key="InverseBooleanConverter"/>
        <converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>

        <Style x:Key="FormLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#AAAAAA"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Margin" Value="0,10,0,3"/> 
        </Style>

        <Style x:Key="GlassTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="#25FFFFFF"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,0"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="CaretBrush" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border" Height="36" Background="{TemplateBinding Background}" CornerRadius="8"
                                BorderBrush="#30FFFFFF" BorderThickness="1">
                            <Grid>
                                <ScrollViewer x:Name="PART_ContentHost" VerticalAlignment="Center" />
                                <TextBlock x:Name="Placeholder" Text="{TemplateBinding Tag}"
                                           Foreground="#88FFFFFF" IsHitTestVisible="False"
                                           VerticalAlignment="Center" Margin="12,0,0,0"
                                           Visibility="Collapsed"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="Text" Value=""/>
                                    <Condition Property="IsFocused" Value="False"/>
                                </MultiTrigger.Conditions>
                                <Setter TargetName="Placeholder" Property="Visibility" Value="Visible"/>
                            </MultiTrigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#35FFFFFF"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#50FFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#40FFFFFF"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#80FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="GlassPasswordBox" TargetType="PasswordBox">
            <Setter Property="Background" Value="#25FFFFFF"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,0"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="CaretBrush" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="PasswordBox">
                        <Border x:Name="border" Height="36" Background="{TemplateBinding Background}" CornerRadius="8"
                                BorderBrush="#30FFFFFF" BorderThickness="1">
                            <ScrollViewer x:Name="PART_ContentHost" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#35FFFFFF"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#50FFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#40FFFFFF"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#80FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="#35FFFFFF"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Height="42" Background="{TemplateBinding Background}" CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Opacity" Value="0.5"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#45FFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#60FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </UserControl.Resources>

    <Grid>
        <Grid.Background>
            <ImageBrush ImageSource="bg_uchat.png" Stretch="UniformToFill"/>
        </Grid.Background>

        <Border Width="420" VerticalAlignment="Center" HorizontalAlignment="Center"
                CornerRadius="20" Background="#15FFFFFF" Padding="35,30">
            
            <Border.BorderBrush>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#40FFFFFF" Offset="0.0"/>
                    <GradientStop Color="#05FFFFFF" Offset="0.5"/>
                    <GradientStop Color="#20FFFFFF" Offset="1.0"/>
                </LinearGradientBrush>
            </Border.BorderBrush>
            
            <Border.Effect>
                <DropShadowEffect Color="#000000" Direction="315" ShadowDepth="5" BlurRadius="20" Opacity="0.5"/>
            </Border.Effect>

            <StackPanel>
                <TextBlock Text="Create account" Foreground="White" FontSize="26" FontWeight="ExtraBold"
                           HorizontalAlignment="Center" TextAlignment="Center" Margin="0,0,0,5"/>

                <TextBlock Text="Join Uchat today" Foreground="#AAAAAA" FontSize="14"
                           HorizontalAlignment="Center" Margin="0,0,0,15"/>

                <StackPanel>
                    <TextBlock Text="Username" Style="{StaticResource FormLabel}" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                             Style="{StaticResource GlassTextBox}"
                             Tag="Choose a username"/>
                </StackPanel>

                <StackPanel>
                    <TextBlock Text="Email" Style="{StaticResource FormLabel}"/>
                    <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                             Style="{StaticResource GlassTextBox}"
                             Tag="Enter your email"/>
                </StackPanel>

                <StackPanel>
                    <TextBlock Text="Display Name" Style="{StaticResource FormLabel}"/>
                    <TextBox Text="{Binding DisplayName, UpdateSourceTrigger=PropertyChanged}"
                             Style="{StaticResource GlassTextBox}"
                             Tag="How should we call you?"/>
                </StackPanel>

                <StackPanel>
                    <TextBlock Text="Password" Style="{StaticResource FormLabel}"/>
                    <PasswordBox x:Name="PasswordBox"
                                 Style="{StaticResource GlassPasswordBox}"
                                 PasswordChanged="PasswordBox_PasswordChanged"/>
                </StackPanel>

                <StackPanel>
                    <TextBlock Text="Confirm Password" Style="{StaticResource FormLabel}"/>
                    <PasswordBox x:Name="ConfirmPasswordBox"
                                 Style="{StaticResource GlassPasswordBox}"
                                 PasswordChanged="ConfirmPasswordBox_PasswordChanged"/>
                </StackPanel>

                <TextBlock Text="{Binding ErrorMessage}"
                           Foreground="#FF6B6B"
                           TextWrapping="Wrap"
                           TextAlignment="Center"
                           Visibility="{Binding ErrorMessage, Converter={StaticResource NullToVisibilityConverter}}"
                           Margin="0,15,0,0" FontSize="12"/>

                <TextBlock Text="{Binding SuccessMessage}"
                           Foreground="#66FF99"
                           TextWrapping="Wrap"
                           TextAlignment="Center"
                           Visibility="{Binding SuccessMessage, Converter={StaticResource NullToVisibilityConverter}}"
                           Margin="0,15,0,0" FontSize="12"/>

                <TextBlock Text="Creating account..." Foreground="#DDDDDD" HorizontalAlignment="Center" Margin="0,5,0,5"
                           Visibility="{Binding IsRegistering, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                <Button Content="Create Account"
                        Command="{Binding RegisterCommand}"
                        Style="{StaticResource PrimaryButton}"
                        IsEnabled="{Binding IsRegistering, Converter={StaticResource InverseBooleanConverter}}"
                        Margin="0,20,0,20"/>

                <Border Background="#20000000" CornerRadius="10" Padding="4">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Button Grid.Column="0" Content="Sign in" Background="Transparent" BorderThickness="0"
                                Foreground="#AAAAAA" FontWeight="SemiBold" Cursor="Hand"
                                Command="{Binding NavigateToLoginCommand}">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="Transparent" Padding="0,8">
                                        <ContentPresenter HorizontalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Foreground" Value="White"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <Border Grid.Column="1" Background="#5B31E79B" CornerRadius="8" Padding="0,8">
                            <TextBlock Text="Sign up" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                        </Border>
                    </Grid>
                </Border>

            </StackPanel>
        </Border>
    </Grid>
</UserControl>